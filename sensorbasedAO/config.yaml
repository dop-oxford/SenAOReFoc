fpga:
  resource: "RIO0"
  bitfile: "bitfiles/doptical_7855R.lvbitx"
  dma_max_length: 1023 
  waveform_max_length: 1023
  AO_min: -10  # V
  AO_max: 10  
  IO_datatype: "FXP"

camera:
  SN: "26883050"
  dataformat: "XI_MONO16"
  data_min: 0  # Minimum image output value
  data_max: 255  # Maximum image output value for dataformat 1023 for actual camera
  exposure: 4000  # us
  auto_gain: 0  # Flag for whether to use automatic exposure / gain mode, 0-auto_gain off, 1-auto_gain on
  exp_priority: 0.8  # exposure n, gain (1 - n)
  ae_max_limit: 500000  # maximum time (us) used for exposure in AEAG procedure
  burst_mode: 0  # Flag for whether to use burst mode, 0-burst_mode off, 1-burst_mode on 
  burst_frames: 10
  acq_timing_mode: "XI_ACQ_TIMING_MODE_FREE_RUN"
  frame_rate: 5  # Hz
  sensor_width: 2048  # pixels
  sensor_height: 2048  # pixels
  bin_factor: 2
  pixel_size: 5.5  # um
  frame_ave_num: 5
    
DM:
  SN: "HSDM69-15-014" 
  DM_num: 0  # Flag for choosing the working DM, 0-Alpao, 1-Boston
  vol_min: -1  # V
  vol_max: 1
  vol_bias: 0
  vol_step: 1
  settling_time: 0.05

DM0: 
  actuator_num: 69  # Alpao
  pitch: 1500  # um
  aperture: 10.5  # um
  coupling_fac: 0.3  # Inter-actuator coupling factor

DM1:
  actuator_num: 140  # Boston
  pitch: 400  # um  
  aperture: 4.4  # mm  
  coupling_fac: 0.15  # Inter-actuator coupling factor  

relay:
  mirror_odd: 0  # Flag for whether there is an odd number of mirrors in between DM and lenslet
  relay_odd: 0  # Flag for whether there is an odd number of relays in between DM and lenslet

lenslet:
  lenslet_pitch: 500  # um
  lenslet_focal_length: 25000  # um  # Alpao 25000  # Boston 15000 for unwrapped phase

search_block:
  div_elem: 5  # Number of elements in each dimension of a search block
  filter_thres: 5  # Cutoff value for low pass filter within each search block after Fourier transform
  sharp_thres: 0.002  # Minimum sharpness threshold within search block below which S-H spot will be considered as obscured
  outline_int: 255  # uint8
  pupil_diam_0: 7.216  # mm  # Alpao 
  pupil_diam_1: 10.1  # mm  # Boston

image:
  noise: 0
  threshold: 0  # Percentage of maximum pixel used for thresholding an image
  dynamic_num: 1  # Number of cycles to use for centroiding with a dynamic range
  normalise: 1  # 0-normalise off, 1-normalise on
  norm_min: 0  # Below which will clip to 0, uint8
  norm_max: 255  # Above which will clip to 1, uint8
  rescale: 1  # 0-rescale off, 1-rescale on

AO:
  recon_coeff_num: 60  # Alpao 60  # Boston 70
  control_coeff_num: 46  # Alpao 46  # Boston 55  # Eighth order Zernike mode ~ 9th-55, 10th-66, 11th-78, 12th-91
  loop_gain: 0.8  # Fixed loop gain for closed-loop control, 0.6
  loop_max: 5  # Maximum number of loops for closed-loop control
  suppress_gain: 1000  # Gain factor used to suppress certain zernike modes
  lambda: 0.63  # um
  tolerance_fact_zern: 0  # RMS error tolerance factor via zernikes, 0.045 = lambda / 14
  tolerance_fact_strehl: 1  # Strehl ratio tolerance factor according to Marechel criteria, 0.81

dummy: 1  # Flag for whether to run in dummy mode, 0-real mode, 1-dummy mode
real_phase: 1  # Flag for whether to use real phase data